/* Archivo: src/App.css (VERSIÓN FINAL PARA IMPRESIÓN CORREGIDA) */

/* --- 0. RESET GLOBAL --- */
body {
  margin: 0;
  padding: 0;
  justify-content: center;
  font-family: system-ui, -apple-system, sans-serif;
  background-color: #6c6d6d;
  color: #333;
  overflow-x: hidden;
}

.app-root {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100%;
}

/* --- 1. NAVBAR --- */
.navbar {
  position: fixed; top: 0; left: 0; width: 100%; height: 70px;
  background-color: #fff; display: flex; justify-content: space-between; align-items: center;
  padding: 0 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; box-sizing: border-box;
}
.navbar-logo { display: flex; align-items: center; gap: 10px; font-size: 1.5rem; font-weight: 800; color: #2a9d8f; cursor: pointer; }
.navbar-logo img { height: 40px; }
.navbar-menu { display: flex; gap: 20px; list-style: none; margin: 0; padding: 0; }
.navbar-menu li { cursor: pointer; font-weight: 500; color: #555; padding: 10px; }
.navbar-menu li:hover { color: #2a9d8f; }
.nav-admin { color: #e76f51 !important; font-weight: bold; }
.navbar-toggle { display: none; }

.main-view-container {
  margin-top: 70px;
  width: 100%;
  min-height: calc(100vh - 70px);
  box-sizing: border-box;
  display: block;
}

/* --- 2. LOGIN --- */
.login-wrapper {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; justify-content: center; align-items: center;
  background-color: #6c6d6d; z-index: 2000;
}
.login-container {
  background: white; padding: 3rem; border-radius: 15px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 100%; max-width: 400px; text-align: center;
}
.login-input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
.login-button { width: 100%; padding: 12px; background: #2a9d8f; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px; }
.login-button:hover { background-color: #21867a; }
.login-error { color: #721c24; background-color: #f8d7da; padding: 10px; border-radius: 6px; margin-bottom: 20px; font-size: 0.9rem; }

/* --- 3. ADMIN PANEL --- */
.admin-layout { display: flex; height: calc(100vh - 70px); width: 100%; overflow: hidden; position: relative; }

/* Sidebar fixed to the left of the page so the vertical bar is always on the left */
.admin-sidebar { position: fixed; top: 70px; left: 0; bottom: 0; width: 240px; background: #264653; color: white; display: flex; flex-direction: column; flex-shrink: 0; z-index: 1000; }
.admin-sidebar-header { padding: 20px; background: rgba(0,0,0,0.2); text-align: center; font-weight: bold; }
.admin-menu li { padding: 15px 20px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.1); transition: background 0.2s; }
.admin-menu li:hover { background: #2a9d8f; }

/* Main content shifted to the right to leave space for the fixed sidebar, and centered */
.admin-main-content { margin-left: 260px; flex-grow: 1; padding: 40px; overflow-y: auto; background-color: #f4f4f9; display: flex; justify-content: center; box-sizing: border-box; min-height: calc(100vh - 70px); }
.admin-section { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); max-width: 1100px; width: 100%; margin: 0 auto; margin-bottom: 30px; }

/* --- 4. CAJA --- */
.caja-container { display: flex; gap: 20px; align-items: flex-start; }
.caja-main { flex: 1; min-width: 320px; }
.caja-side { width: 360px; background: #fff; border-radius: 8px; padding: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.04); }
.caja-table { width: 100%; border-collapse: collapse; }
.caja-table th, .caja-table td { padding: 8px 10px; border-bottom: 1px solid #f0f0f0; text-align: left; font-size: 0.95rem; }
.caja-table thead th { background: #f8f9fa; font-weight: 700; }
.caja-row-abierta { background: #e8f8f4; }
.caja-row-cerrada { background: #f5f5f7; color: #6c6c6c; }
.caja-badge { display: inline-block; padding: 4px 8px; border-radius: 999px; font-weight: 700; font-size: 0.8rem; }
.caja-badge.abierta { background: #2a9d8f; color: white; }
.caja-badge.cerrada { background: #adb5bd; color: white; }

/* --- 5. DASHBOARD & INVENTARIO --- */
.dashboard-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px; padding: 40px; width: 100%; max-width: 1200px; margin: 0 auto; }
.widget { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
.graph-placeholder { height: 250px; background: #f9f9f9; border: 2px dashed #ddd; display: flex; align-items: center; justify-content: center; color: #999; border-radius: 8px; }
.inventario-container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 40px; }
.inventario-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
.inventario-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
.inventario-table th, .inventario-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
.inventario-table th { background: #f8f9fa; font-weight: 600; }
tr.critical-row td { color: #d90429; background-color: #fff5f5; font-weight: 600; }

/* --- 6. POS & KDS --- */
.terminal-container { display: flex; height: calc(100vh - 70px); overflow: hidden; padding: 20px; gap: 20px; background-color: #f0f2f5; width: 100%; box-sizing: border-box; }
.product-grid {
  flex: 3;
  display: grid;
  /* Forzar 3 columnas en pantallas anchas */
  grid-template-columns: repeat(3, minmax(140px, 1fr));
  gap: 15px;
  align-content: start;
  overflow-y: auto;
  padding-bottom: 100px;
}
.product-item { background: white; border: 1px solid #ddd; border-radius: 10px; height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: transform 0.1s, box-shadow 0.1s; text-align: center; }
.product-item:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-color: #2a9d8f; }
.product-name { font-weight: 600; margin-bottom: 5px; font-size: 0.95rem; }
.product-price { color: #2a9d8f; font-weight: 700; }
.ticket-display { flex: 1; background: white; border-radius: 12px; padding: 20px; display: flex; flex-direction: column; box-shadow: -5px 0 20px rgba(0,0,0,0.05); }
.ticket-items { flex-grow: 1; overflow-y: auto; margin-bottom: 15px; }
.ticket-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px dashed #eee; align-items: center; font-size: 0.95rem; }
.quantity-control { display: flex; gap: 5px; align-items: center; margin-left: 10px; }
.quantity-control button { background: #f0f0f0; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; font-weight: bold; }
.ticket-total { font-size: 1.5rem; font-weight: 800; text-align: right; margin-bottom: 20px; border-top: 2px solid #333; padding-top: 10px; }

.cocina-container { display: flex; gap: 15px; padding: 20px; height: calc(100vh - 70px); width: 100%; overflow-x: auto; box-sizing: border-box; }
.cocina-columna { flex: 1; min-width: 280px; background: #e9ecef; border-radius: 8px; display: flex; flex-direction: column; padding: 10px; }
.cocina-columna h2 { text-align: center; margin: 0 0 10px 0; font-size: 1.1rem; color: #555; border-bottom: 2px solid #ccc; padding-bottom: 10px; }
.pedidos-list { flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
.pedido-card { background: white; padding: 15px; border-radius: 6px; border-left: 8px solid #2a9d8f; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
.pedido-card.warning { border-left-color: #e9c46a; }
.pedido-card.danger { border-left-color: #e76f51; }
.pedido-card.completado { border-left-color: #adb5bd; opacity: 0.6; background: #f8f9fa; }
.pedido-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 800; font-size: 1.1rem; }
.pedido-timer { font-family: monospace; font-size: 1.2rem; }
.pedido-timer.atraso { color: #e76f51; }
.pedido-items-list { list-style: none; padding: 0; margin: 0; }
.pedido-items-list li { padding: 4px 0; border-bottom: 1px solid #f0f0f0; }
.kds-button-container { display: flex; gap: 10px; margin-top: 15px; }
.kds-complete-btn { flex: 1; background: #2a9d8f; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold; }
.kds-delete-btn { width: 40px; background: #fbecec; color: #d90429; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }

/* --- 7. GLOBAL COMPONENTS --- */
.btn-primary, .add-new-button { background: #2a9d8f; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: background 0.2s; }
.btn-primary:hover, .add-new-button:hover { background: #21867a; }
.btn-small { padding: 5px 10px; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background: #e9ecef; color: #333; margin-right: 5px; }
.cancel-button { background: #ccc; color: #333; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
.modal-backdrop { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; display: flex; justify-content: center; align-items: center; }
.modal-content { background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); }
.input-group { margin-bottom: 15px; text-align: left; }
.input-group label { display: block; margin-bottom: 5px; font-weight: 600; }
.input-group input, .input-group select { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
.input-row { display: flex; gap: 15px; }
.modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px;}
.payment-button { width: 100%; padding: 15px; background: #fff; border: 2px solid #eee; border-radius: 8px; font-weight: 600; cursor: pointer; text-align: left; margin-bottom: 10px; }
.payment-button:hover { border-color: #2a9d8f; color: #2a9d8f; background: #f0fdfc; }
.confirm-button { width: 100%; padding: 15px; background: #264653; color: white; border: none; border-radius: 8px; font-size: 1.2rem; font-weight: 700; cursor: pointer; margin-top: 10px; }
.confirm-button:disabled { background: #ccc; cursor: not-allowed; }
.hold-button { width: 100%; padding: 10px; background: #e9c46a; color: #333; border: none; border-radius: 8px; margin-bottom: 10px; font-weight: 600; cursor: pointer; }
.hold-item-button { width: 100%; padding: 12px; background: #fff; border: 1px solid #ccc; margin-bottom: 5px; border-radius: 6px; cursor: pointer; text-align: left; }

/* Nuevos estilos: encabezados KDS y listas de espera */
.kds-header { font-weight: 800; display: block; margin: 0 0 10px 0; padding-bottom: 6px; }
.kds-header.nuevos { color: #2a9d8f; border-bottom: 2px solid rgba(42,157,143,0.15); }
.kds-header.advertencia { color: #b0893b; border-bottom: 2px solid rgba(233,196,106,0.12); }
.kds-header.peligro { color: #e76f51; border-bottom: 2px solid rgba(231,111,81,0.12); }
.kds-header.completados { color: #6c757d; border-bottom: 2px solid rgba(108,117,125,0.08); }
.kds-header.espera { color: #856404; border-bottom: 2px dashed rgba(133,100,4,0.08); }

.hold-list { background: #fff; border: 1px solid #eee; padding: 10px; border-radius: 8px; margin-bottom: 12px; }
.hold-list.cola-cocina { background: #fff7e6; border-color: #ffecb5; }
.hold-list.espera { background: #f7f7fb; }
.hold-row { padding: 10px; border-bottom: 1px solid #f0f0f0; font-size: 0.9rem; }

.hold-list .hold-item-button { text-align: left; }

/* --- RESPONSIVE --- */
@media (max-width: 900px) {
  .navbar-menu { display: none; }
  .navbar-toggle { display: block; font-size: 1.5rem; }
  .dashboard-content { grid-template-columns: 1fr; padding: 15px; }
  .terminal-container { flex-direction: column; overflow-y: auto; height: auto; }
  /* En móvil mostramos una sola columna */
  .product-grid { grid-template-columns: 1fr; padding-bottom: 20px; }
  .ticket-display { width: 100%; }
  .cocina-container { flex-direction: column; height: auto; overflow-y: auto; }
  .admin-layout { flex-direction: column; height: auto; }
  /* Revert fixed sidebar on small screens so layout stacks naturally */
  .admin-sidebar { position: relative; top: auto; left: auto; bottom: auto; width: 100%; height: auto; flex-direction: row; overflow-x: auto; }
  .admin-main-content { margin-left: 0; padding: 20px; }
  .admin-menu { display: flex; }
  .admin-menu li { white-space: nowrap; padding: 15px; }
  .caja-container { flex-direction: column; }
  .caja-side { width: 100%; }
}

/* ========================================= */
/* ESTILOS DE IMPRESIÓN (FIX DEFINITIVO)    */
/* ========================================= */
@media print {
  /* Ocultar elementos de UI que no queremos en el PDF */
  .navbar, .admin-sidebar, .no-print, .admin-menu, .login-wrapper, .navbar-toggle, .toast {
    display: none !important;
  }

  /* Asegurar que el contenedor del reporte se muestre correctamente */
  .report-container {
    display: block !important;
    position: static !important;
    left: auto !important;
    top: auto !important;
    width: auto !important;
    margin: 0 !important;
    padding: 10px !important;
    background: white !important;
    box-shadow: none !important;
    color: black !important;
  }

  /* Forzar visibilidad y ajustes de color dentro del reporte */
  .report-container * {
    visibility: visible !important;
    color: black !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  body {
    background-color: white;
    font-size: 12pt;
    color: black;
  }

  .report-header h2 {
    font-size: 24pt;
    text-align: center;
    color: black !important;
  }

  tr, td, th {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    border: 1px solid #ccc;
  }
}

/* Favorites star in inventory */
.fav-star { background: transparent; border: none; font-size: 1.1rem; cursor: pointer; }
.fav-star.fav { color: #ffb703; }

/* Dashboard favorites semicircle */
.favorites-widget { padding: 15px; background: white; border-radius: 8px; border: 1px solid #eee; }
.favorites-grid { display: flex; gap: 16px; flex-wrap: wrap; }
.fav-item { width: 120px; text-align: center; display:flex; flex-direction:column; align-items:center; }
.semi-wrap { width: 80px; height: 40px; overflow: hidden; }
.semi-wrap .circle { width: 80px; height: 80px; border-radius: 50%; background: conic-gradient(from 180deg at 50% 50%, #2a9d8f var(--p, 0%), #eee 0%); transform: translateY(-40px) scaleY(-1); transform-origin: center; }
.fav-label { margin-top: 6px; font-size: 0.9rem; color:#333; }

/* Layout for favorites row */
.favorites-row { display:flex; gap:16px; align-items:flex-start; grid-column: 1 / -1; }
.favorites-widget { flex: 1; min-width: 0; }
.top-products-widget { padding: 15px; background: white; border-radius: 8px; border: 1px solid #eee; width:320px; flex: 0 0 320px; }
.top-products-list ol { margin: 0; padding-left: 18px; }